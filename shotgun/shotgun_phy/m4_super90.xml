<?xml version="1.0" encoding="utf-8"?>
<Items>
  <Item name="" identifier="deep_m4_super90" subcategory="shotgun" category="Weapon" cargocontaineridentifier="metalcrate" tags="mediumitem,weapon,gun,gunsmith,provocativetohumanai,mountableweapon,deep_shotgun,deep_condition_100" Scale="0.21" impactsoundtag="impact_metal_light">
    <Price baseprice="810" sold="true" buyingpricemultiplier="3.0" minamount="4" maxamount="4" canbespecial="true" minleveldifficulty="35" displaynonempty="false">
      <Price storeidentifier="merchantoutpost" multiplier="1" />
      <Price storeidentifier="merchantcity" multiplier="1" />
      <Price storeidentifier="merchantresearch" multiplier="1" />
      <Price storeidentifier="merchantmilitary" multiplier="1" />
      <Price storeidentifier="merchantmine" multiplier="1" />
    </Price>
    <Deconstruct time="10">
      <Item identifier="physicorium" />
      <Item identifier="physicorium" />
    </Deconstruct>
    <Fabricate suitablefabricators="fabricator" requiredtime="10">
      <RequiredSkill identifier="weapons" level="80" />
      <RequiredItem identifier="physicorium_barrel" />
      <RequiredItem identifier="physicorium_part" />
      <RequiredItem identifier="engineeringplastic" />
      <RequiredItem identifier="glassfibre" />
    </Fabricate>
    <InventoryIcon texture="%ModDir%/weapon/shotgun/shotgun45.png" sourcerect="261,520,178,155" origin="0.5,0.5" />
    <Sprite texture="%ModDir%/weapon/shotgun/shotgun_phy/shotgun_phy.png" sourcerect="15,662,532,113" depth="0.55" origin="0.5,0.5" />
    <Body width="200" height="50" density="10" />
    <Holdable slots="Any,RightHand+LeftHand" controlpose="true" holdpos="40,-10" aimpos="55,9" handle1="-60,-15" handle2="60,30" holdangle="-35" msg="ItemMsgPickUpSelect">
      <!-- 二战老兵合约-->
      <StatusEffect type="OnActive" targettype="This,Character" setvalue="true" comparison="and">
        <Conditional deep_contract_wwt_detect="gt 0.0" />
        <dropitem />
      </StatusEffect>
      <!-- 禁用霰弹合约-->
      <StatusEffect type="OnActive" targettype="This,Character" setvalue="true" comparison="and">
        <Conditional deep_contract_no_shotgun_detect="gt 0.0" />
        <dropitem />
      </StatusEffect>
      <StatusEffect type="Onactive" target="Character" setvalue="true">
        <GiveTalentInfo giverandom="false" talentidentifiers="deep_talent_all" />
      </StatusEffect>
      <StatusEffect type="OnSecondaryUse" target="Character" SpeedMultiplier="0.8" setvalue="true" />
      <StatusEffect type="Onactive" target="Character" setvalue="true">
        <Affliction identifier="deep_shotgun_damgage_balance" strength="100" />
      </StatusEffect>
      <StatusEffect type="OnActive" target="Character" setValue="true" multiplyafflictionsbymaxvitality="true">
        <Affliction identifier="deepgun_inwater_detect" strength="100" />
      </StatusEffect>
      <!-- 有碎甲芯片时，增加1级穿甲-->
      <StatusEffect type="OnActive" interval="0.5" targettype="This,Character" targetitemcomponent="RangedWeapon" comparison="and" setvalue="true" penetration="0.1">
        <Conditional chip_bodyshot_detect="gt 10.0" />
      </StatusEffect>
      <!-- 有碎甲芯片时，增加1级穿甲-->
      <StatusEffect type="OnActive" interval="0.5" targettype="This,Character" targetitemcomponent="RangedWeapon" comparison="and" setvalue="true" penetration="0">
        <Conditional chip_bodyshot_detect="lt 10.0" />
      </StatusEffect>
    </Holdable>
    <RangedWeapon barrelpos="140,-8" HoldTrigger="true" weapondamagemodifier="1.4" spread="0.1" unskilledspread="3" combatPriority="80" reload="0.4" drawhudwhenequipped="true" crosshairscale="0.5">
      <Crosshair texture="%ModDir%/weapon/sight/frontsight.png" sourcerect="8,0,253,255" />
      <CrosshairPointer texture="%ModDir%/weapon/sight/frontsight.png" sourcerect="273,0,237,249" />
      <ParticleEmitter particle="deep_muzzleflash" particleamount="1" velocitymin="0" velocitymax="0" />
      <ParticleEmitter particle="deep_plasmaspark" particlespersecond="5" anglemin="-20" anglemax="20" velocitymin="100" velocitymax="800" />
      <Sound file="%ModDir%/weapon/ammo/1014.ogg" type="OnUse" range="3000" selectionmode="Random" volume="2" />
      <Sound file="%ModDir%/weapon/ammo/1014.ogg" type="OnUse" range="3000" frequencymultiplier="0.95" volume="2" />
      <Sound file="%ModDir%/weapon/ammo/1014.ogg" type="OnUse" range="3000" frequencymultiplier="1.05" volume="2" />
      <StatusEffect type="OnUse" target="This">
        <Explosion range="150.0" force="1.5" shockwave="false" smoke="false" flash="true" sparks="false" flames="false" underwaterbubble="false" camerashake="24" />
      </StatusEffect>
      <!-- ===========动画开始=========== -->
      <!-- 上膛并抛壳 -->
      <StatusEffect type="OnUse" target="This" delay="0.2" setValue="true" disabledeltatime="true" />
      <StatusEffect type="OnUse" target="This" delay="0.2" disabledeltatime="true">
        <LuaHook name="M4_super90PumbInSprite" />
      </StatusEffect>
      <!-- 抛壳特效(12号霰弹) -->
      <StatusEffect type="OnUse" target="This" delay="0.3" setvalue="true" handle2="50,19" handle1="-42,-14" disabledeltatime="true">
        <ParticleEmitter particle="deep_casingfirearm_12shell" particleamount="1" anglemin="90" anglemax="150" velocitymin="50" velocitymax="250" CopyEntityAngle="true" />
        <RequiredItems items="deep_12shell" type="Contained" targetslot="0" />
      </StatusEffect>
      <!-- 抛壳特效(原版弹药红色) -->
      <StatusEffect type="OnUse" target="This" delay="0.3" setvalue="true" handle2="50,19" handle1="-42,-14" disabledeltatime="true">
        <ParticleEmitter particle="deep_casingfirearm_12shell" particleamount="1" anglemin="90" anglemax="150" velocitymin="50" velocitymax="250" CopyEntityAngle="true" />
        <RequiredItems items="shotgunshell,shotgunshellblunt,shotgunslugexplosive" type="Contained" targetslot="0" />
      </StatusEffect>
      <!-- 抛壳特效(12号虎尾蛇) -->
      <StatusEffect type="OnUse" target="This" delay="0.3" setvalue="true" handle2="50,19" handle1="-42,-14" disabledeltatime="true">
        <ParticleEmitter particle="deep_casingfirearm_12shell_tiger" particleamount="1" anglemin="90" anglemax="150" velocitymin="50" velocitymax="250" CopyEntityAngle="true" />
        <RequiredItems items="deep_12shell_tigershark" type="Contained" targetslot="0" />
      </StatusEffect>
      <!-- 抛壳特效(12号独头) -->
      <StatusEffect type="OnUse" target="This" delay="0.3" setvalue="true" handle2="50,19" handle1="-42,-14" disabledeltatime="true">
        <ParticleEmitter particle="deep_casingfirearm_12shell_slug" particleamount="1" anglemin="90" anglemax="150" velocitymin="50" velocitymax="250" CopyEntityAngle="true" />
        <RequiredItems items="deep_slug" type="Contained" targetslot="0" />
      </StatusEffect>
      <!-- 抛壳特效(12号鸟弹) -->
      <StatusEffect type="OnUse" target="This" delay="0.3" setvalue="true" handle2="50,19" handle1="-42,-14" disabledeltatime="true">
        <ParticleEmitter particle="deep_casingfirearm_12shell_bird" particleamount="1" anglemin="90" anglemax="150" velocitymin="50" velocitymax="250" CopyEntityAngle="true" />
        <RequiredItems items="deep_birdshot" type="Contained" targetslot="0" />
      </StatusEffect>
      <!-- 回归常规态 -->
      <StatusEffect type="OnUse" target="This" delay="0.6" setvalue="true" holdpos="40,-10" aimpos="55,9" holdangle="-35" aimangle="0" />
      <StatusEffect type="OnUse" target="This" delay="0.6" disabledeltatime="true">
        <LuaHook name="M4_super90PumbOutSprite" />
      </StatusEffect>
      <StatusEffect type="OnUse" target="This" delay="0.7" setvalue="true" handle2="60,30" handle1="-60,-15" />
      <!-- ===========动画结束=========== -->
      <RequiredItems items="shotgunammo" type="Contained" msg="ItemMsgAmmoRequired" />
      <RequiredSkill identifier="weapons" level="80" />
      <StatusHUD drawhudwhenequipped="false" overlaycolor="0,0,0,0" range="3000" thermalgoggles="false" showdeadcharacters="false" showtexts="false" />
    </RangedWeapon>
    <ItemContainer capacity="1" maxstacksize="7" hideitems="false" containedstateindicatorslot="0" containedstateindicatorstyle="bullet">
      <Containable items="shotgunammo" hide="true" setactive="true">
        <!-- 进入lua脚本执行换弹. -->
        <StatusEffect type="OnInserted" target="This" Condition="0" setValue="true">
          <LuaHook name="M4_super90Reload" />
        </StatusEffect>
        <StatusEffect type="OnRemoved" target="This">
          <LuaHook name="M4_super90Removed" />
        </StatusEffect>
      </Containable>
      <SlotIcon slotindex="0" texture="%ModDir%/misc/ui.png" sourcerect="10,8,64,57" origin="0.5,0.5" />
      <SlotIcon slotindex="1" texture="%ModDir%/misc/ui.png" sourcerect="10,70,85,40" origin="0.5,0.5" />
      <SlotIcon slotindex="2" texture="%ModDir%/misc/ui.png" sourcerect="189,300,90,60" origin="0.5,0.5" />
      <SlotIcon slotindex="3" texture="%ModDir%/misc/ui.png" sourcerect="278,22,56,32" origin="0.5,0.5" />
      <SlotIcon slotindex="4" texture="%ModDir%/misc/ui.png" sourcerect="197,210,72,54" origin="0.5,0.5" />
      <SlotIcon slotindex="5" texture="%ModDir%/misc/ui.png" sourcerect="11,250,82,81" origin="0.5,0.5" />
      <SlotIcon slotindex="6" texture="%ModDir%/misc/ui.png" sourcerect="11,250,82,81" origin="0.5,0.5" />
      <SubContainer capacity="1" maxstacksize="1">
        <Containable items="flashlight" hide="false" itempos="41,5" setactive="true" />
      </SubContainer>
      <SubContainer capacity="1" maxstacksize="1">
        <Containable items="deep_laser" hide="false" itempos="41,5" setactive="true" />
      </SubContainer>
      <SubContainer capacity="1" maxstacksize="1">
        <Containable items="holographic_sight,red_sight,2x_sight,2.5x_sight,1_3x_sight" hide="false" itempos="-4,14" setactive="true" containedspritedepth="0.45" depth="0.55" />
        <Containable tags="thermalgoggles_sight" hide="false" itempos="-4,14" setactive="true">
          <StatusEffect type="OnActive" target="This" targetitemcomponent="StatusHUD" drawhudwhenequipped="false" overlaycolor="0,0,0,0" thermalgoggles="false" showtexts="false" debugwiring="false" delay="1" stackable="false" />
        </Containable>
        <Containable Items="thermalgoggles_sight">
          <StatusEffect type="OnActive" target="This" targetitemcomponent="StatusHUD" drawhudwhenequipped="true" overlaycolor="176,0,0,120" thermalgoggles="true" />
        </Containable>
      </SubContainer>
      <SubContainer capacity="1" maxstacksize="1">
        <Containable items="shotgun_ammo_bag" hide="false" itempos="-13,6" setactive="true" />
      </SubContainer>
      <SubContainer capacity="1" maxstacksize="1">
        <Containable tags="deep_chip" excludedidentifiers="chip_light_mag" hide="true" itempos="26,-1.5" setactive="true" containedspritedepth="0.45" depth="0.55" />
      </SubContainer>
      <SubContainer capacity="1" maxstacksize="1">
        <Containable tags="deep_chip" excludedidentifiers="chip_light_mag" hide="true" itempos="26,-1.5" setactive="true" containedspritedepth="0.45" depth="0.55" />
      </SubContainer>
    </ItemContainer>
    <aitarget sightrange="3000" soundrange="5000" fadeouttime="5" />
    <Quality>
      <QualityStat stattype="FirepowerMultiplier" value="0.15" />
      <QualityStat stattype="Condition" value="0.1" />
    </Quality>
    <Upgrade gameversion="0.10.0.0" scale="0.5" />
    <SkillRequirementHint identifier="weapons" level="80" />
  </Item>
</Items>