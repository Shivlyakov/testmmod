<?xml version="1.0" encoding="utf-8"?>
<Items>
  <Item name="" identifier="deep_type_38" subcategory="sniper" category="Weapon" cargocontaineridentifier="metalcrate" tags="mediumitem,weapon,gun,gunsmith,mountableweapon,deep_condition_100" Scale="0.25" impactsoundtag="impact_metal_light">
    <PreferredContainer primary="secarmcab" amount="1" spawnprobability="0.02" notcampaign="true" />
    <PreferredContainer secondary="wrecksecarmcab,abandonedsecarmcab" amount="1" spawnprobability="0.02" />
    <Price baseprice="200" sold="true" buyingpricemultiplier="3.0" minamount="4" maxamount="4" canbespecial="true" minleveldifficulty="0" displaynonempty="false">
      <Price storeidentifier="merchantoutpost" multiplier="1" />
      <Price storeidentifier="merchantcity" multiplier="1" />
      <Price storeidentifier="merchantresearch" multiplier="1" />
      <Price storeidentifier="merchantmilitary" multiplier="1" />
      <Price storeidentifier="merchantmine" multiplier="1" />
    </Price>
    <Fabricate suitablefabricators="fabricator" requiredtime="10">
      <RequiredSkill identifier="weapons" level="60" />
      <RequiredItem identifier="steel_barrel" amount="1" />
      <RequiredItem identifier="steel_part" amount="1" />
      <RequiredItem identifier="carbon" amount="2" />
    </Fabricate>
    <Deconstruct time="10">
      <Item identifier="steel" />
      <Item identifier="steel" />
    </Deconstruct>
    <InventoryIcon texture="%ModDir%/weapon/sniperrifle/sniper45.png" sourcerect="455,1249,259,229" origin="0.5,0.5" />
    <Sprite texture="%ModDir%/weapon/sniperrifle/sniper_steel/sniper_steel.png" sourcerect="15,664,649,92" depth="0.55" origin="0.5,0.5" />
    <Body width="250" height="50" density="10" />
    <Holdable slots="Any,RightHand+LeftHand" controlpose="true" holdpos="60,-20" aimpos="83,0" handle1="-150,-5" handle2="80,30" holdangle="-35" msg="ItemMsgPickUpSelect">
      <!-- 禁用狙击合约-->
      <StatusEffect type="OnActive" targettype="This,Character" setvalue="true" comparison="and">
        <Conditional deep_contract_no_sniper_detect="gt 0.0" />
        <dropitem />
      </StatusEffect>
      <StatusEffect type="OnSecondaryUse" target="Character" SpeedMultiplier="0.6" setvalue="true" />
      <StatusEffect type="Onactive" target="Character" setvalue="true">
        <GiveTalentInfo giverandom="false" talentidentifiers="deep_talent_all" />
      </StatusEffect>
      <StatusEffect type="OnActive" target="Character" setValue="true" multiplyafflictionsbymaxvitality="true">
        <Affliction identifier="deepgun_inwater_detect" strength="100" />
      </StatusEffect>
      <!-- 有碎甲芯片时，增加1级穿甲-->
      <StatusEffect type="OnActive" interval="0.5" targettype="This,Character" targetitemcomponent="RangedWeapon" comparison="and" setvalue="true" penetration="0.1">
        <Conditional chip_bodyshot_detect="gt 10.0" />
      </StatusEffect>
      <!-- 有碎甲芯片时，增加1级穿甲-->
      <StatusEffect type="OnActive" interval="0.5" targettype="This,Character" targetitemcomponent="RangedWeapon" comparison="and" setvalue="true" penetration="0">
        <Conditional chip_bodyshot_detect="lt 10.0" />
      </StatusEffect>
      <!--6倍镜-->
      <StatusEffect type="OnActive" target="Character" multiplyafflictionsbymaxvitality="true">
        <Affliction identifier="6x_sight" strength="10" />
        <RequiredItems items="3x_sight,thermalgoggles_sight_6x" type="Contained" />
      </StatusEffect>
    </Holdable>
    <RangedWeapon reload="1.7" weapondamagemodifier="1" holdtrigger="true" barrelpos="325,29" spread="2" unskilledspread="10" combatPriority="80" drawhudwhenequipped="true" crosshairscale="0.5">
      <Crosshair texture="%ModDir%/weapon/sight/frontsight.png" sourcerect="8,0,253,255" />
      <CrosshairPointer texture="%ModDir%/weapon/sight/frontsight.png" sourcerect="273,0,237,249" />
      <ParticleEmitter particle="deep_muzzleflash" particleamount="1" velocitymin="0" velocitymax="0" />
      <ParticleEmitter particle="deep_plasmaspark" particlespersecond="10" anglemin="-20" anglemax="20" velocitymin="100" velocitymax="800" />
      <Sound file="%ModDir%/Sound/Weapons/TYPE_38/gunFire/type_38_fire.ogg" type="OnUse" range="3000" selectionmode="Random" volume="0.5" />
      <Sound file="%ModDir%/Sound/Weapons/TYPE_38/gunFire/type_38_fire.ogg" type="OnUse" range="3000" frequencymultiplier="0.95" volume="0.5" />
      <Sound file="%ModDir%/Sound/Weapons/TYPE_38/gunFire/type_38_fire.ogg" type="OnUse" range="3000" frequencymultiplier="1.05" volume="0.5" />
      <StatusEffect type="OnUse" target="This">
        <Explosion range="150.0" force="3" shockwave="true" smoke="false" flames="false" sparks="false" underwaterbubble="false" camerashake="70" />
      </StatusEffect>
      <StatusEffect type="OnUse" target="This" Condition="-800" />
      <StatusEffect type="NotInWater" target="This" Condition="10" />
      <StatusEffect type="InWater" target="This" Condition="1000" />
      <!--"Use" contained magazine to spawn projectiles.-->
      <StatusEffect type="OnUse" target="Contained">
        <Use />
      </StatusEffect>
      <!--6倍镜-->
      <StatusEffect type="OnSecondaryUse" target="Character" multiplyafflictionsbymaxvitality="true">
        <Affliction identifier="6x_sight_reduce" strength="3.5" />
        <RequiredItems items="3x_sight,thermalgoggles_sight_6x" type="Contained" />
      </StatusEffect>
      <StatusEffect type="OnUse" target="Character" disabledeltatime="true" multiplyafflictionsbymaxvitality="true">
        <ReduceAffliction identifier="6x_sight_reduce" strength="1.8" />
        <RequiredItems items="3x_sight,thermalgoggles_sight_6x" type="Contained" />
      </StatusEffect>
      <StatusEffect type="OnSecondaryUse" target="This,Character" comparison="and" multiplyafflictionsbymaxvitality="true">
        <Conditional speed="gt 3" />
        <ReduceAffliction identifier="6x_sight_reduce" strength="2.2" />
        <RequiredItems items="3x_sight,thermalgoggles_sight_6x" type="Contained" />
      </StatusEffect>
      <StatusEffect type="OnUse" Condition="-100" target="This">
        <RequiredItems items="chip_unstable_gunpowder" type="Contained" />
      </StatusEffect>
      <!-- ============== 拉栓动画开始 ================= -->
      <!-- Locks the ammunition, preventing the person from adding more or removing. -->
      <StatusEffect type="OnUse" target="Contained" NonInteractable="true" disabledeltatime="true" delay="0.01" setvalue="true" />
      <!-- Unlocks the ammunition, allowing the person to add more or remove. -->
      <StatusEffect type="OnUse" target="Contained" NonInteractable="false" disabledeltatime="true" delay="1.4" setvalue="true" />
      <!-- 拉 -->
      <StatusEffect type="OnUse" target="This" delay="0.6" setValue="true" handle1="-120,-5" holdpos="70,-10" aimpos="80,0" holdangle="-5" aimangle="-5" disabledeltatime="true" />
      <StatusEffect type="OnUse" target="This" delay="0.6" setValue="true" forceplaysounds="true" disabledeltatime="true">
        <Sound file="%ModDir%/Sound/Weapons/TYPE_38/gunOther/type_38_bolt.ogg" type="OnUse" range="200" volume="0.5" />
      </StatusEffect>
      <StatusEffect type="OnUse" target="This" delay="0.8" setValue="true" handle1="-150,30" holdpos="70,-10" aimpos="80,0" holdangle="-5" aimangle="-5" disabledeltatime="true" />
      <StatusEffect type="OnUse" target="This" delay="0.8" disabledeltatime="true">
        <LuaHook name="TYPE_38BoltOutSprite" />
      </StatusEffect>
      <!-- ================== 抛壳 ==================== -->
      <StatusEffect type="OnUse" target="This" delay="0.8" disabledeltatime="true">
        <ParticleEmitter particle="deep_casingfirearm_762_51" particleamount="1" anglemin="90" anglemax="150" velocitymin="50" velocitymax="250" CopyEntityAngle="true" />
      </StatusEffect>
      <!-- 推 -->
      <StatusEffect type="OnUse" target="This" delay="0.9" setValue="true" forceplaysounds="true" disabledeltatime="true">
        <Sound file="%ModDir%/Sound/Weapons/TYPE_38/gunOther/type_38_bolt_forward.ogg" type="OnUse" range="200" volume="0.5" />
      </StatusEffect>
      <StatusEffect type="OnUse" target="This" delay="1.1" setValue="true" handle1="-150,-5" holdpos="70,-10" aimpos="83,0" holdangle="-5" aimangle="-5" disabledeltatime="true" />
      <StatusEffect type="OnUse" target="This" delay="1.1" disabledeltatime="true">
        <LuaHook name="TYPE_38BoltInSprite" />
      </StatusEffect>
      <StatusEffect type="OnUse" target="This" delay="1.2" setvalue="true" holdpos="60,-20" aimpos="83,0" holdangle="-35" aimangle="0" />
      <StatusEffect type="OnUse" target="This" delay="1.3" setvalue="true" handle2="80,30" handle1="-150,-5" />
      <!-- ============== 拉栓动画结束 ================= -->
      <RequiredItems items="deep_type_38_mag" type="Contained" msg="ItemMsgAmmoRequired" />
      <RequiredSkill identifier="weapons" level="60" />
      <StatusEffect type="OnBroken" target="This" Condition="3000" disabledeltatime="true" delay="3" stackable="false" />
      <StatusHUD drawhudwhenequipped="false" overlaycolor="0,0,0,0" range="3000" thermalgoggles="false" showdeadcharacters="false" showtexts="false" />
    </RangedWeapon>
    <ItemContainer capacity="1" maxstacksize="1" hideitems="false" containedstateindicatorslot="0" containedstateindicatorstyle="bullet">
      <Containable items="deep_type_38_mag" hide="false" itempos="-15,7" setactive="true" rotation="0">
        <!-- Locks the ammunition, preventing the person from adding more or removing. -->
        <StatusEffect type="OnInserted" target="Contained" NonInteractable="true" disabledeltatime="true" delay="0.01" setvalue="true" />
        <!-- Unlocks the ammunition, allowing the person to add more or remove. -->
        <StatusEffect type="OnInserted" target="Contained" NonInteractable="false" disabledeltatime="true" delay="2.6" setvalue="true" />
        <!-- ============== 换弹动画开始 ================= -->
        <StatusEffect type="OnInserted" target="This" delay="0.01" setValue="true" Condition="0" />
        <!-- 先拉栓 -->
        <StatusEffect type="OnInserted" target="This" delay="0.1" setValue="true" handle1="-120,-5" holdpos="60,-10" aimpos="70,10" holdangle="15" aimangle="10" disabledeltatime="true" />
        <StatusEffect type="OnInserted" target="This" delay="0.1" setValue="true" disabledeltatime="true">
          <Sound file="%ModDir%/Sound/Weapons/TYPE_38/gunOther/type_38_bolt.ogg" range="200" volume="0.5" />
        </StatusEffect>
        <StatusEffect type="OnInserted" target="This" delay="0.3" setValue="true" handle1="-150,20" handle2="100,-10" holdpos="60,-10" aimpos="70,10" holdangle="35" aimangle="20" disabledeltatime="true" />
        <StatusEffect type="OnInserted" target="This" delay="0.3" disabledeltatime="true">
          <LuaHook name="TYPE_38BoltOutSprite" />
        </StatusEffect>
        <StatusEffect type="OnInserted" target="This" delay="0.5" setValue="true" handle1="-100,-10" />
        <!-- 左手拿下弹匣 -->
        <StatusEffect type="OnInserted" target="This" delay="1.2" holdpos="50,-30" setValue="true" handle2="-50,20"></StatusEffect>
        <!-- 立即隐藏弹匣 -->
        <StatusEffect type="OnInserted" target="Contained" spritecolor="255,255,255,0" disabledeltatime="true" setvalue="true" />
        <!-- 左手放下 -->
        <StatusEffect type="OnInserted" target="This" delay="1.3" setValue="true" handle2="-350,-100" />
        <!-- 左手装弹匣 -->
        <StatusEffect type="OnInserted" target="This" delay="2" setValue="true" handle2="-50,20"></StatusEffect>
        <!-- 显示弹匣 -->
        <StatusEffect type="OnInserted" target="Contained" spritecolor="255,255,255,255" disabledeltatime="true" delay="2.1" setvalue="true" />
        <!-- 隐藏弹匣 -->
        <StatusEffect type="OnInserted" target="Contained" spritecolor="255,255,255,0" disabledeltatime="true" delay="2.4" setvalue="true" />
        <!-- 拔出弹匣恢复255 -->
        <StatusEffect type="OnRemoved" target="Contained" spritecolor="255,255,255,255" disabledeltatime="true" setvalue="true" />
        <!-- 左手归位 -->
        <StatusEffect type="OnInserted" target="This" delay="2.3" setValue="true" holdangle="35" aimangle="10" handle2="-50,20" />
        <!-- 再推栓 -->
        <StatusEffect type="OnInserted" target="This" delay="2.5" setValue="true" handle1="-100,30">
          <Sound file="%ModDir%/Sound/Weapons/TYPE_38/gunOther/type_38_bolt_forward.ogg" range="200" volume="0.5" />
        </StatusEffect>
        <StatusEffect type="OnInserted" target="This" delay="2.7" setValue="true" handle1="-100,-5" holdpos="60,-20" disabledeltatime="true" />
        <StatusEffect type="OnInserted" target="This" delay="2.7" disabledeltatime="true">
          <LuaHook name="TYPE_38BoltInSprite" />
        </StatusEffect>
        <!-- 回归常态 -->
        <StatusEffect type="OnInserted" target="This" delay="3" setvalue="true" holdpos="60,-20" aimpos="83,0" holdangle="-35" aimangle="0" />
        <StatusEffect type="OnInserted" target="This" delay="3" setvalue="true" handle2="80,30" handle1="-150,-5" />
        <!-- ============== 换弹动画结束 ================= -->
        <StatusEffect type="OnInserted" target="This" delay="1.7" setValue="true" disabledeltatime="true">
          <sound file="%ModDir%/Sound/Weapons/TYPE_38/gunOther/type_38_re.ogg" type="OnUse" range="200.0" loop="false" volume="0.5" />
          <ParticleEmitter particle="fleshsmoke" particlespersecond="2" scalemin="1" scalemax="2" />
        </StatusEffect>
      </Containable>
      <SlotIcon slotindex="0" texture="%ModDir%/misc/ui.png" sourcerect="10,8,64,57" origin="0.5,0.5" />
      <SlotIcon slotindex="1" texture="%ModDir%/misc/ui.png" sourcerect="10,70,85,40" origin="0.5,0.5" />
      <SlotIcon slotindex="2" texture="%ModDir%/misc/ui.png" sourcerect="189,300,90,60" origin="0.5,0.5" />
      <SlotIcon slotindex="3" texture="%ModDir%/misc/ui.png" sourcerect="403,22,51,29" origin="0.5,0.5" />
      <SlotIcon slotindex="4" texture="%ModDir%/misc/ui.png" sourcerect="11,250,82,81" origin="0.5,0.5" />
      <SubContainer capacity="1" maxstacksize="1">
        <Containable items="flashlight,focusingflashlight,spreadflashlight" hide="false" itempos="29,7" setactive="true" />
      </SubContainer>
      <SubContainer capacity="1" maxstacksize="1">
        <Containable items="deep_laser" hide="false" itempos="29,7" setactive="true" />
      </SubContainer>
      <SubContainer capacity="1" maxstacksize="1">
        <Containable items="holographic_sight,red_sight,2x_sight,2.5x_sight,1_3x_sight" hide="false" itempos="-2,14.5" setactive="true" containedspritedepth="0.45" depth="0.55" />
        <Containable items="8x_sight" hide="false" itempos="-2,14.5" setactive="true" containedspritedepth="0.45" depth="0.55">
          <StatusEffect type="OnInserted" target="This" TargetItemComponent="RangedWeapon" crosshairscale="1.2" setValue="true"></StatusEffect>
          <StatusEffect type="OnRemoved" target="This" TargetItemComponent="RangedWeapon" crosshairscale="0.5" setValue="true"></StatusEffect>
        </Containable>
        <Containable items="3x_sight" hide="false" itempos="-2,14.5" setactive="true" containedspritedepth="0.45" depth="0.55">
          <StatusEffect type="OnInserted" target="This" TargetItemComponent="RangedWeapon" crosshairscale="0.8" setValue="true"></StatusEffect>
          <StatusEffect type="OnRemoved" target="This" TargetItemComponent="RangedWeapon" crosshairscale="0.5" setValue="true"></StatusEffect>
        </Containable>
        <Containable items="thermalgoggles_sight_6x" hide="false" itempos="-2,14.5" setactive="true" containedspritedepth="0.45" depth="0.55">
          <StatusEffect type="OnInserted" target="This" TargetItemComponent="RangedWeapon" crosshairscale="0.8" setValue="true"></StatusEffect>
          <StatusEffect type="OnRemoved" target="This" TargetItemComponent="RangedWeapon" crosshairscale="0.5" setValue="true"></StatusEffect>
        </Containable>
        <Containable tags="thermalgoggles_sight,thermalgoggles_sight_6x" hide="false" itempos="-2,14.5" setactive="true">
          <StatusEffect type="OnActive" target="This" targetitemcomponent="StatusHUD" drawhudwhenequipped="false" overlaycolor="0,0,0,0" thermalgoggles="false" showtexts="false" debugwiring="false" delay="1" stackable="false" />
        </Containable>
        <Containable Items="thermalgoggles_sight,thermalgoggles_sight_6x">
          <StatusEffect type="OnActive" target="This" targetitemcomponent="StatusHUD" drawhudwhenequipped="true" overlaycolor="176,0,0,120" thermalgoggles="true" />
        </Containable>
      </SubContainer>
      <SubContainer capacity="1" maxstacksize="1">
        <Containable tags="deep_chip" excludedidentifiers="chip_light_mag" hide="true" itempos="26,-1.5" setactive="true" containedspritedepth="0.45" depth="0.55" />
      </SubContainer>
    </ItemContainer>
    <Quality>
      <QualityStat stattype="FirepowerMultiplier" value="0.05" />
    </Quality>
    <Upgrade gameversion="0.10.0.0" scale="0.5" />
    <SkillRequirementHint identifier="weapons" level="60" />
  </Item>
</Items>